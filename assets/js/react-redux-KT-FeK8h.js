import{R as v,a as w}from"./react-CMW9CHtC.js";import"./use-sync-external-store-Ci2LeNnY.js";var s="default"in v?w:v,x=Symbol.for("react-redux-context"),S=typeof globalThis<"u"?globalThis:{};function R(){if(!s.createContext)return{};const e=S[x]??(S[x]=new Map);let i=e.get(s.createContext);return i||(i=s.createContext(null),e.set(s.createContext,i)),i}var N=R();function L(e){e()}function E(){let e=null,i=null;return{clear(){e=null,i=null},notify(){L(()=>{let r=e;for(;r;)r.callback(),r=r.next})},get(){const r=[];let n=e;for(;n;)r.push(n),n=n.next;return r},subscribe(r){let n=!0;const t=i={callback:r,next:null,prev:i};return t.prev?t.prev.next=t:e=t,function(){!n||e===null||(n=!1,t.next?t.next.prev=t.prev:i=t.prev,t.prev?t.prev.next=t.next:e=t.next)}}}}var y={notify(){},get:()=>[]};function M(e,i){let r,n=y,t=0,o=!1;function c(C){b();const h=n.subscribe(C);let p=!1;return()=>{p||(p=!0,h(),d())}}function a(){n.notify()}function l(){f.onStateChange&&f.onStateChange()}function u(){return o}function b(){t++,r||(r=e.subscribe(l),n=E())}function d(){t--,r&&t===0&&(r(),r=void 0,n.clear(),n=y)}function g(){o||(o=!0,b())}function m(){o&&(o=!1,d())}const f={addNestedSub:c,notifyNestedSubs:a,handleChangeWrapper:l,isSubscribed:u,trySubscribe:g,tryUnsubscribe:m,getListeners:()=>n};return f}var U=typeof window<"u"&&typeof window.document<"u"&&typeof window.document.createElement<"u",P=typeof navigator<"u"&&navigator.product==="ReactNative",T=U||P?s.useLayoutEffect:s.useEffect;function O({store:e,context:i,children:r,serverState:n,stabilityCheck:t="once",identityFunctionCheck:o="once"}){const c=s.useMemo(()=>{const u=M(e);return{store:e,subscription:u,getServerState:n?()=>n:void 0,stabilityCheck:t,identityFunctionCheck:o}},[e,n,t,o]),a=s.useMemo(()=>e.getState(),[e]);T(()=>{const{subscription:u}=c;return u.onStateChange=u.notifyNestedSubs,u.trySubscribe(),a!==e.getState()&&u.notifyNestedSubs(),()=>{u.tryUnsubscribe(),u.onStateChange=void 0}},[c,a]);const l=i||N;return s.createElement(l.Provider,{value:c},r)}var D=O;export{D as P};
